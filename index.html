<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Civil Airdrop</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div id="app-container">
        <!-- Loading Screen -->
        <div id="loading-screen">
            <div class="loader-icon">
                <i class="fas fa-hard-hat fa-spin"></i>
            </div>
            <p>در حال بارگذاری پروژه...</p>
        </div>

        <!-- Main Content (Hidden Initially) -->
        <div id="main-content" style="display: none;">
            <div class="header">
                <div class="rank-display">
                    <span id="rank-name">ترم یکی</span> (<span id="rank-level">Lv. 1</span>)
                </div>
                <div class="pph-display">
                    <i class="fas fa-coins"></i> <span id="pph">0</span> PPH
                </div>
            </div>

            <!-- Home/Mining View -->
            <div id="home-view" class="view active">
                <div class="balance-display">
                    <span id="balance">0</span>
                </div>
                
                <!-- دکمه جایزه روزانه -->
                <button class="daily-btn" onclick="openDailyReward()">
                    <i class="fas fa-calendar-check"></i>
                    <span>جایزه روزانه (Daily)</span>
                </button>

                <div class="coin-container">
                    <button id="coin-button">
                        <i class="fas fa-hard-hat"></i>
                    </button>
                </div>
                
                <div class="energy-bar">
                    <i class="fas fa-bolt"></i>
                    <span id="energy">1000 / 1000</span>
                    <div class="energy-bar-fill"></div>
                </div>
                
                <!-- دکمه دعوت دوستان (ظاهری) -->
                <div style="text-align:center; margin-top:15px;">
                    <p style="font-size:0.8rem; color:#aaa;" onclick="openFriendsModal()">
                        <i class="fas fa-user-plus"></i> دعوت از دوستان
                    </p>
                </div>
            </div>

            <!-- Market View -->
            <div id="market-view" class="view">
                <h2><i class="fas fa-store"></i> بازار (Market)</h2>
                <div id="market-items-container" class="market-grid">
                    <!-- Market items will be populated by JS -->
                </div>
            </div>

            <!-- Earn View -->
            <div id="earn-view" class="view">
                <h2><i class="fas fa-tasks"></i> تسک‌ها (Earn)</h2>
                <p style="text-align: center; margin-top: 50px; color: #777;">بخش تسک‌ها به زودی اضافه خواهد شد...</p>
            </div>

            <!-- Tools View -->
            <div id="tools-view" class="view">
                <h2><i class="fas fa-tools"></i> ابزار مهندسی</h2>
                <div class="tool-section">
                    <h3>محاسبه حجم بتن (متر مکعب)</h3>
                    <input type="number" id="concrete-length" placeholder="طول (متر)">
                    <input type="number" id="concrete-width" placeholder="عرض (متر)">
                    <input type="number" id="concrete-height" placeholder="ضخامت (متر)">
                    <button onclick="calculateConcrete()">محاسبه</button>
                    <p>نتیجه: <span id="concrete-result">0</span> متر مکعب</p>
                </div>
                <div class="tool-section">
                    <h3>محاسبه وزن میلگرد (کیلوگرم)</h3>
                    <input type="number" id="rebar-diameter" placeholder="قطر (میلی‌متر)">
                    <input type="number" id="rebar-length" placeholder="طول (متر)">
                    <button onclick="calculateRebar()">محاسبه</button>
                    <p>نتیجه: <span id="rebar-result">0</span> کیلوگرم</p>
                </div>
                <div class="tool-section">
                    <h3>محاسبه تعداد آجر</h3>
                    <input type="number" id="brick-area" placeholder="مساحت دیوار (متر مربع)">
                    <button onclick="calculateBricks()">محاسبه</button>
                    <p>نتیجه: <span id="brick-result">0</span> عدد آجر (تقریبی)</p>
                </div>
                <div class="tool-section">
                    <h3>محاسبه درصد شیب</h3>
                    <input type="number" id="slope-rise" placeholder="اختلاف ارتفاع (متر)">
                    <input type="number" id="slope-run" placeholder="طول افقی (متر)">
                    <button onclick="calculateSlope()">محاسبه</button>
                    <p>نتیجه: <span id="slope-result">0</span> درصد</p>
                </div>
            </div>
            
            <div class="nav-menu">
                <button class="nav-btn active" onclick="switchView('home-view', this)"><i class="fas fa-home"></i><span>اصلی</span></button>
                <button class="nav-btn" onclick="switchView('market-view', this)"><i class="fas fa-store"></i><span>بازار</span></button>
                <button class="nav-btn" onclick="switchView('earn-view', this)"><i class="fas fa-tasks"></i><span>کسب درآمد</span></button>
                <button class="nav-btn" onclick="switchView('tools-view', this)"><i class="fas fa-tools"></i><span>ابزار</span></button>
            </div>
        </div>
    </div>

    <!-- Modal Offline Earnings -->
    <div id="offline-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('offline-modal')">&times;</span>
            <h3>خوش آمدید!</h3>
            <p>در مدتی که نبودید، تیم شما بیکار ننشسته!</p>
            <p>درآمد آفلاین شما:</p>
            <h2 id="offline-earnings">0</h2>
            <button class="modal-button" onclick="closeModal('offline-modal')">عالیه!</button>
        </div>
    </div>

    <!-- Modal Daily Reward -->
    <div id="daily-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('daily-modal')">&times;</span>
            <h3>تقویم پاداش</h3>
            <div class="daily-grid" id="daily-grid">
                <!-- JS will fill this -->
            </div>
            <button id="claim-daily-btn" class="modal-button" onclick="claimDailyReward()">دریافت جایزه</button>
        </div>
    </div>

    <!-- Modal Friends -->
    <div id="friends-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('friends-modal')">&times;</span>
            <h3>دعوت از مهندسین</h3>
            <div class="friends-box">
                <i class="fas fa-gift" style="font-size:3rem; color:#e74c3c; margin-bottom:10px;"></i>
                <p>برای هر دعوت +25,000 سکه بگیرید!</p>
                <div class="invite-link">https://t.me/CivilAirdropBot?start=123</div>
                <button class="copy-btn" onclick="alert('لینک کپی شد!')">کپی لینک</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
